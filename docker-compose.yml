version: '3.8'

services:
  manager-agent:
    image: painaidee/manager-agent:latest
    restart: always
    ports:
      - "8000:8000"
    environment:
      TECHNICAL_AGENT_URL: http://technical-agent:8000
      FUNDAMENTAL_AGENT_URL: http://fundamental-agent:8001
      DATABASE_AGENT_URL: http://database-agent:8003
      AUTO_LEARNING_AGENT_URL: http://learning-agent:8004
      EXECUTION_AGENT_URL: http://execution-agent:8006
      EXECUTION_API_KEY: your_secret_key
      DEFAULT_ACCOUNT_ID: 1
      RISK_PER_TRADE: 0.01
      STOP_LOSS_PERCENTAGE: 0.03
      MAX_POSITION_PERCENTAGE: 0.20
      ENABLE_TECHNICAL_STOP: "true"
      MAX_TOTAL_EXPOSURE: 0.50
      PER_REQUEST_RISK_BUDGET: 0.05
      MIN_POSITION_VALUE: 500.0
      TECHNICAL_AGENT_WEIGHT: 0.5
      FUNDAMENTAL_AGENT_WEIGHT: 0.5
      LEARNING_MODE: conservative
      WINDOW_SIZE: 50
      DB_CLIENT_TIMEOUT: 10
      DB_CLIENT_MAX_RETRIES: 3
      DB_CLIENT_BACKOFF_FACTOR: 0.5
      DB_CLIENT_FAILURE_THRESHOLD: 5
      DB_CLIENT_COOLDOWN_PERIOD: 30
      AGENT_CLIENT_TIMEOUT: 10
      AGENT_CLIENT_MAX_RETRIES: 3
      AGENT_CLIENT_BACKOFF_FACTOR: 0.5
      AGENT_CLIENT_FAILURE_THRESHOLD: 5
      AGENT_CLIENT_COOLDOWN_PERIOD: 30
      ASSET_BIASES: "{}"
    depends_on:
      - technical-agent
      - fundamental-agent
      - database-agent
      - learning-agent
      - execution-agent

  technical-agent:
    image: painaidee/technical-agent:latest
    restart: always
    expose:
      - "8000"
    environment:
      API_KEY: your_technical_api_key

  fundamental-agent:
    image: painaidee/fundamental-agent:latest
    restart: always
    expose:
      - "8001"
    environment:
      API_KEY: your_fundamental_api_key

  database-agent:
    image: painaidee/database-agent:latest
    restart: always
    expose:
      - "8003"
    environment:
      API_KEY: your_database_api_key
    volumes:
      - ./data:/app/data

  learning-agent:
    image: painaidee/learning-agent:latest
    restart: always
    expose:
      - "8004"
    environment:
      API_KEY: your_learning_api_key

  execution-agent:
    image: painaidee/execution-agent:latest
    restart: always
    expose:
      - "8006"
    environment:
      BROKER_API_KEY: your_broker_key